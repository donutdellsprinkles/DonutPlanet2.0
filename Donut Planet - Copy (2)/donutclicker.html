<html>
    <head>
        <title>Clicknut Confectionery</title>
        <script src="https://kit.fontawesome.com/e6d4c486db.js" crossorigin="anonymous"></script>
        <link rel="icon" type="image/x-icon" href="https://em-content.zobj.net/thumbs/120/twitter/348/doughnut_1f369.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    </head>
    <body>
        <div class="counter">
           <h3>Frosting Count</h1>
           <h1 id="number">0</h1>
        </div>
        <button id="back" onclick="window.location.href='website.html';">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>
        </button>
        <button id="saveButton" class="button">Save Frosting</button>
        <button onclick="convert.showModal()" class="button">Convert Frosting to Sprinkles</button>
        <button id="openskill" onclick="skilltree.showModal()">
            <svg width="20px" height="20px" viewBox="0 0 546 512" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M532.6 103.8L475.3 13.1C470.2 5 461.1 0 451.4 0H94.6C84.9 0 75.8 5 70.7 13.1L13.3 103.8C-16.3 150.6 9.89998 215.7 65.2 223.2C69.2 223.7 73.3 224 77.3 224C103.4 224 126.6 212.6 142.5 195C158.4 212.6 181.6 224 207.7 224C233.8 224 257 212.6 272.9 195C288.8 212.6 312 224 338.1 224C364.3 224 387.4 212.6 403.3 195C419.3 212.6 442.4 224 468.5 224C472.6 224 476.6 223.7 480.6 223.2C536.1 215.8 562.4 150.7 532.7 103.8H532.6ZM484.7 254.9H484.6C479.3 255.6 473.9 256 468.4 256C456 256 444.1 254.1 433 250.7V384H113V250.6C101.8 254.1 89.8 256 77.4 256C71.9 256 66.4 255.6 61.1 254.9H61C56.9 254.3 52.9 253.6 49 252.6V384V448C49 483.3 77.7 512 113 512H433C468.3 512 497 483.3 497 448V384V252.6C493 253.6 489 254.4 484.7 254.9Z" fill="black"/>
              </svg>
          </button>
          <button id="business" onclick="businessplace.showModal()" style="display: none;"><img style="height: 30px; width:30px;" src="https://em-content.zobj.net/source/microsoft/74/shopping-trolley_1f6d2.png"></button>


        <div class="center">
           <button class="donut" id="donut"><img src="https://lh3.googleusercontent.com/pw/AIL4fc9dXDrD4ecnZn6rPzm8yzEZhIsNJhNgqDilDiG181mu39GZtcRfxqxkG2_KpD4abkrNJPq0tiriZHVQufs_aa0X6E5HMYFJC0allGw0G3C8He83ViA=w2400"></button>
        </div>
        <dialog id="skilltree">
            <button id="changeToDoubleButton" class="buying">Double Donut</button>
            <br>
            <h4>Increase the amount of frosting you receive from 1 to 2. Costs 350 Frostings</h3>
            <br>
            <br>
            <button id="changeToQuadButton" class="buying">Quad Trust</button>
            <br>
            <h4>Increase the amount of frosting you receive from each donut click to 4. Costs 2500 Frostings</h3>
            <br>
            <br>
            <button id="changeToBusiness" class="buying">Buy Business status</button>
            <br>
            <h4>Gain thea ability to invest in different businesses for a possible return, gain access to the donut market. Costs 4000 Frostings</h4>
            <button onclick="hideskill()" class="buying">Close</button>
        </dialog>
        

    <dialog id="convert">
        <p id="points">0</p>
        <h4>1 Sprinkle is equal to 100 Frostings</p>
        <button id="changetosprinkles" class="button">Convert Frostings to Sprinkles</button>
        <br>
        <br>
        <button onclick="hideconvert()" class="buying">Close</button>
        </dialog>  

      <dialog id="businessplace">
        <button id="donuttogo" class="buying">Donut To Go.</button>
        <h4>Invest in the business Donut To Go. First time investment costs 1500 frostings
        <br> After that every 30 seconds 200 frostings will be deducted due to business costs.
        <br> Fifty percent chance of getting a profit of 400 frostings ever 60 seconds.
        </h4>
        <button id="stopdonuttogo" class="buying">Stop Inveseting in Donut to Go.</button>
        <br>
        <br>
        <button onclick="hidebusinessplace()" class="buying">Close</button>
    </dialog>
    </body>
    <style>
         #back {
        width: 30px;
        height: 30px;
        background-color: transparent;
        border: none;
        cursor: pointer;
      
  
     
    }
        #businessplace {
            border: none;
            border-radius: 10px;
            background-color: #D2B48C;;
        }
        #business {
            background: none;
            border: none;
            cursor: pointer;
        }
        #convert {
            border: none;
            border-radius: 10px;
            background-color: #B0C4DE;
        }
         .button {
        border: none;
        border-radius: 5px;
        font-family: Simp;
        background-color: #DDCFFF;
        color: #040de1;
        cursor: pointer;
        transition: all .2s ease;
    }
    .button:hover {
        background-color: #040de1;
        color: #DDCFFF;
        transition: all .2s ease;
        border-radius: 10px;
    }
         @keyframes colorChange {
        0% { color: #FFD700; } /* Yellow */
        25% { color: #FF6B00; } /* Orange */
        50% { color: #0038A8; } /* Blue */
        75% { color: #FF0000; } /* Red */
        100% { color: #00BFFF; } /* Sky Blue */
      }
  #points {
    font-family: Simp;
    animation: colorChange 2s linear infinite;
    font-size: 30px;
  }
        #openskill {
            background: none;
            border: none;
            cursor: pointer;
        }
        .buying {
            background-color:darkorange;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        h4 {
            font-family: Simp;
            color: #333333;
        }
        #skilltree {
            border: none;
            border-radius: 10px;
            background-color: #B0C4DE;
        }
        h1 {
            font-family: Simp;
            font-size: 50px;
            color: #FFFDD0;
        }
        h3 {
            font-family: Simp;
            color: #FFFDD0;
        }
          @font-face {
    font-family: Simp;
    src: url(simpson.otf)
}
        .counter {
            background-color: #F5B6B0;
            opacity: 0.8;
            border-radius: 10px;
            
        }
        .center {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh; /* 100% of the viewport height */
        }
        .donut {
            background-color: transparent;
            cursor: pointer;
            background: none;
            border: none;
            

        }
        body {
            background-color: #F88379;
        }
    </style>
    <script>
        //todolist: add sprinkles conversion. add loop adding sprinkles. add more skill tree stuff. Save frosting. Music
         document.addEventListener('DOMContentLoaded', function() {
            var numbersElement = document.getElementById('number');
            var numbers = parseInt(numbersElement.textContent);
            const changeToDoubleButton = document.getElementById('changeToDoubleButton');
            var pointsElement = document.getElementById('points');
            var points = parseInt(pointsElement.textContent);
            const donuttogo = document.getElementById('donuttogo');
            let deductNumbersInterval;
            let addNumbersWithChanceInterval;
            let canClick = true;
            let increment = 1;  

            
    function loadPoints() {
  const savedPoints = localStorage.getItem('points1');
  if (savedPoints) {
    pointsElement.innerText = savedPoints;
    points = parseInt(savedPoints);
  }
}

loadPoints();

function business(){
    const hasBusinessStatus = localStorage.getItem('hasBusinessStatus');
    if (hasBusinessStatus === 'true') {
        document.getElementById('business').style.display = 'inline-block';
    }
}
business()

function loadincrement() {
  const incrementsaved= localStorage.getItem('increment');
  if (incrementsaved) {
    increment = parseInt(incrementsaved);
  }
}

loadincrement();



function loadfrosting() {
  const frostingamount = localStorage.getItem('frostingAmount');
  if (frostingamount) {
    numbersElement.innerText = frostingamount;
    numbers = parseInt(frostingamount);
  }
}

loadfrosting();


function deductNumbers() {
    numbers -= 200;
    numbersElement.textContent = numbers;
    localStorage.setItem('frostingAmount', numbers);
}

// Function to add numbers with a 1/2 chance every 60 seconds
function addNumbersWithChance() {
    if (Math.random() < 0.90) {
        numbers += 400;
        numbersElement.textContent = numbers;
        localStorage.setItem('frostingAmount', numbers);
    }
}



function donuttogoloop() {
    const donutstatus = localStorage.getItem('donuttogoloop'); // Corrected item name
    if (donutstatus === 'true') {
        deductNumbersInterval = setInterval(deductNumbers, 30000); // Every 30 seconds
        addNumbersWithChanceInterval = setInterval(addNumbersWithChance, 60000); // Every 60 seconds
    }
}

donuttogoloop();

        donut.addEventListener('click', function() {
            if (canClick) {
                numbers += increment;
                numbersElement.textContent = numbers;
                
                canClick = false;
                setTimeout(function() {
                    canClick = true;
                }, 16); // 1000 milliseconds = 1 second
            }
        });

        changeToDoubleButton.addEventListener('click', function() {
            if (numbers >= 350) {
                    numbers -= 350  ;
                    numbersElement.textContent = numbers;
                    increment = 2;
                    localStorage.setItem('increment',increment);
                    localStorage.setItem('frostingAmount', numbers);
                } else {
                    alert("You don't have enough frostings");
                }
            
        });

        changeToQuadButton.addEventListener('click', function() {
            if (numbers >= 2500) {
                    numbers -= 2500;
                    numbersElement.textContent = numbers;
                    increment = 4;
                    localStorage.setItem('increment',increment);
                    localStorage.setItem('frostingAmount', numbers);
                } else {
                    alert("You don't have enough frostings");
                }
        });



        changetosprinkles.addEventListener('click', function() {
            if (numbers >= 100) { const conversionRate = 100; // Conversion rate from numbers to points
        const sprinkles = numbers / conversionRate; // Calculate sprinkles
        
        const roundedSprinkles = Math.ceil(sprinkles); // Round up to the nearest whole number
        
        points += roundedSprinkles; // Add roundedSprinkles to points
        pointsElement.textContent = points; // Update points display
        
        numbers = 0; // Reset numbers to zero
        numbersElement.textContent = numbers; // Update numbers display
        
        // Save updated points in local storage
        localStorage.setItem('points1', points);
        localStorage.setItem('frostingAmount', numbers);
    }
    else {
                    alert("Get some more frostings");
                }
            
        });

        saveButton.addEventListener('click', function() {
        // Save current amount of frosting to local storage
        localStorage.setItem('frostingAmount', numbers);
        alert('Frosting amount has been saved!');
    });


        donuttogo.addEventListener('click', function(){
            if (numbers >= 1500) {
                    numbers -= 1500;
                    numbersElement.textContent = numbers;
                    setInterval(deductNumbers, 30000); // Every 30 seconds
                    setInterval(addNumbersWithChance, 60000); // Every 60 seconds
                    localStorage.setItem('frostingAmount', numbers);
                    localStorage.setItem('donuttogoloop', 'true');
                } else {
                    alert("You don't have enough frostings");
                }

        });


        stopdonuttogo.addEventListener('click', function(){
            clearInterval(deductNumbersInterval);
            clearInterval(addNumbersWithChanceInterval);
            localStorage.removeItem('donuttogoloop'); // Remove the flag from local storage
            alert('Investment in Donut to Go has been stopped.');

        })


        document.getElementById('changeToBusiness').addEventListener('click', function() {
    const requiredFrostings = 4000;

    if (numbers >= requiredFrostings) {
        // Deduct the required frostings
        numbers -= requiredFrostings;
        numbersElement.textContent = numbers;
        localStorage.setItem('frostingAmount', numbers);

        // Make the "business" button visible
        document.getElementById('business').style.display = 'inline-block';
        localStorage.setItem('hasBusinessStatus', 'true');
        alert('Congratulations! You have purchased Business status.');
    } else {
        alert('You do not have enough frostings to purchase Business status.');
    }
});



         });
       
         function hideskill() {
  document.getElementById('skilltree').close()
}
        

function hideconvert() {
  document.getElementById('convert').close()
}

function hidebusinessplace() {
  document.getElementById('businessplace').close()
}
    </script>
</html>
