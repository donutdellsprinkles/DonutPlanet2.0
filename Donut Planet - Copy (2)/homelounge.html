<html>
    <head>
        <title>Home Lounge</title>
        <link rel="icon" type="image/x-icon" href="https://em-content.zobj.net/thumbs/120/twitter/348/doughnut_1f369.png">    
    </head>

   <body>
    <h1 id="name">.</h1>
    <button id="edit" onclick="preview.showModal()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"/></svg>
    </button>
    <button id="openshop" onclick="shop.showModal()">
        <svg width="20px" height="20px" viewBox="0 0 546 512" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M532.6 103.8L475.3 13.1C470.2 5 461.1 0 451.4 0H94.6C84.9 0 75.8 5 70.7 13.1L13.3 103.8C-16.3 150.6 9.89998 215.7 65.2 223.2C69.2 223.7 73.3 224 77.3 224C103.4 224 126.6 212.6 142.5 195C158.4 212.6 181.6 224 207.7 224C233.8 224 257 212.6 272.9 195C288.8 212.6 312 224 338.1 224C364.3 224 387.4 212.6 403.3 195C419.3 212.6 442.4 224 468.5 224C472.6 224 476.6 223.7 480.6 223.2C536.1 215.8 562.4 150.7 532.7 103.8H532.6ZM484.7 254.9H484.6C479.3 255.6 473.9 256 468.4 256C456 256 444.1 254.1 433 250.7V384H113V250.6C101.8 254.1 89.8 256 77.4 256C71.9 256 66.4 255.6 61.1 254.9H61C56.9 254.3 52.9 253.6 49 252.6V384V448C49 483.3 77.7 512 113 512H433C468.3 512 497 483.3 497 448V384V252.6C493 253.6 489 254.4 484.7 254.9Z" fill="black"/>
          </svg>
      </button>
      <button id="back" onclick="window.location.href='website.html';">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>
    </button>
    <dialog id="preview">
        <button type="button"  id="namechange">Change Name</button>
        <input id="searchbar"  type="text" name="search" placeholder="Change name">
        <p>Change Bannerâ†“</p>
        <input type="file" id="bannerInput" accept="image/*" />
        <br>
        <br>
        <button onclick="hidechange()">Close</button>
      </dialog>
      <dialog id="shop">
        <p id="p123">Sprinkles:</p>
        <p id="points">300</p>
        <input type="text" id="codeInput" placeholder="Enter Code">
        <button id="applyButton">Apply Code</button>
        <br>
        <button id="purchasebutton2">Change Name Color to Homer Yellow: 600 Sprinkles</button>
        <p>More Customization Options coming soon! Stay tuned on the donut blog</p>
        <button onclick="hideshop()">Close</button>
      </dialog>
      <button class="button" onclick="experiences.showModal()" >Donut Planet Experiences</button>
      <dialog id="experiences">
        <button class="button"  onclick="window.location.href='donutclicker.html';">Open Clicknut Confectionery</button>
        <br>
        <br>
        <button class="button"  onclick="window.location.href='https://homer.donutdellsprinkles.repl.co/';">Open Homer Simpson Fan Community</button>
        <br>
        <br>
        <button class="button"  onclick="window.location.href='https://bobart-the-soothsayer.donutdellsprinkles.repl.co/';">Bobart The Soothsayer</button>
        <br>
        <br>
        <button onclick="hidexp()">Close</button>
      </dialog>
      
      <button class="button" id="diary" onclick="shownotes()"> Diary </button>
      <div id="notes">
        <button class="button" onclick="hidenotes()">Close</button>
        <iframe src="https://notesapp.donutdellsprinkles.repl.co/" frameborder="0" scrolling="no" width="100%" height="100%" ></iframe>
      </div>

    </body>
    <style>
         #notes {
    background-color: #DD4E4E;
    border: none;
    border-radius: 5px;
    width: 50%;
    height: 50%;
    display: none;
    position: absolute;
  }
           #experiences {
    background-color: #DD4E4E;
    border: none;
    border-radius: 5px;
  }
         .button {
        border: none;
        border-radius: 5px;
        font-family: Simp;
        background-color: #DDCFFF;
        color: #040de1;
        cursor: pointer;
        transition: all .2s ease;
    }
    .button:hover {
        background-color: #040de1;
        color: #DDCFFF;
        transition: all .2s ease;
        border-radius: 10px;
    }
          @font-face {
    font-family: Comic;
    src: url(BoldlyMissy.otf)
}
  @font-face {
    font-family: Simp;
    src: url(simpson.otf)
}
          @keyframes colorChange {
        0% { color: #FFD700; } /* Yellow */
        25% { color: #FF6B00; } /* Orange */
        50% { color: #0038A8; } /* Blue */
        75% { color: #FF0000; } /* Red */
        100% { color: #00BFFF; } /* Sky Blue */
      }
      #points {
    font-family: Simp;
    animation: colorChange 2s linear infinite;
    font-size: 30px;
  }
         #name {
        position: relative;
        font-size: 50px;
        left: 5px;
        font-family: Simp;
        /*  color: white;
        text-shadow: 0px 0px 6px rgba(255,255,255,0.7);
         */
         color: #02075d;
        text-shadow: 0px 0px 9px #02075d;
       
    }
           #back {
        width: 30px;
        height: 30px;
        background-color: transparent;
        border: none;
        cursor: pointer;
        position:absolute;
        top:5%;
        left:89%;
     
    }
        #shop {
  background-color: #F88379;
    border: none;
    border-radius: 5px;
}
         #openshop {
        width: 30px;
        height: 30px;
        background-color: transparent;
        border: none;
        cursor: pointer;
        position: absolute;
        top:5%;
        left:92%;
  }
        #preview {
    background-color: #DD4E4E;
    border: none;
    border-radius: 5px;
  }
        body {
            background: linear-gradient(to right, #FAD0C9, #F8C3BD, #F5B6B0, #F2A9A4, #EF9C98);
        }
        #edit {
        width: 30px;
        height: 30px;
        background-color: transparent;
        border: none;
        cursor: pointer;
        position: absolute;
        top:5%;
        left:95%;
        
    }
    </style>
    <script>
         document.addEventListener('DOMContentLoaded', () => {
            const bannerInput = document.getElementById('bannerInput');
            const savedbanner = localStorage.getItem('banner');
        var pointsElement = document.getElementById('points');
    var codeInputElement = document.getElementById('codeInput');
    var applyButton = document.getElementById('applyButton');
    var points = parseInt(pointsElement.textContent);
    const name = document.getElementById('name');



            bannerInput.addEventListener('change', () => {
        const file = bannerInput.files[0];
        const reader = new FileReader();

        reader.onload = function(event) {
            const imageUrl3 = event.target.result;
            document.body.style.backgroundImage = `url(${imageUrl3})`;
            document.body.style.backgroundRepeat = 'no-repeat';
            document.body.style.backgroundSize = 'cover';
            localStorage.setItem('banner', imageUrl3);
        };

        reader.readAsDataURL(file);
    });


    function loadBanner() {
        const savedbanner = localStorage.getItem('banner');
        var pointsElement = document.getElementById('points');
    var codeInputElement = document.getElementById('codeInput');
    var applyButton = document.getElementById('applyButton');
    var points = parseInt(pointsElement.textContent);
    var purchasebutton2 = document.getElementById('purchasebutton2')
    const name = document.getElementById('name');
        if (savedbanner) {
            document.body.style.backgroundImage = `url(${savedbanner})`;
            document.body.style.backgroundRepeat = 'no-repeat';
            document.body.style.backgroundSize = 'cover';
        }
    }
    loadBanner()


    function loadPoints() {
  const savedPoints = localStorage.getItem('points1');
  if (savedPoints) {
    pointsElement.innerText = savedPoints;
    points = parseInt(savedPoints);
  }
}

loadPoints();

    
  applyButton.addEventListener('click', function() {
  var enteredCode = codeInputElement.value;
  
  // Check if the code has already been redeemed
  if (localStorage.getItem('donut1') && enteredCode === "donut") {
    alert('Code has already been redeemed.');
    return;
} else if (localStorage.getItem('donutdell1') && enteredCode === "donutdell") {
    alert('Code has already been redeemed.');
    return;
} else if (localStorage.getItem('homer3') && enteredCode === "homer") {
    alert('Code has already been redeemed.');
    return;
}
else if (localStorage.getItem('donuteid') && enteredCode === "donuteid") {
    alert('Code has already been redeemed.');
    return;
}

if (enteredCode.toLowerCase() === "donut") {
    points = parseInt(pointsElement.innerText) + 300;
    pointsElement.innerText = points;
    localStorage.setItem('donut1', true);
} else if (enteredCode === "donutdell") {
    points = parseInt(pointsElement.innerText) + 600;
    pointsElement.innerText = points;
    localStorage.setItem('donutdell1', true);
} else if (enteredCode === "homer") {
    points = parseInt(pointsElement.innerText) + 900;
    pointsElement.innerText = points;
    localStorage.setItem('homer3', true);
}
else if (enteredCode === "donuteid") {
    points = parseInt(pointsElement.innerText) + 1800;
    pointsElement.innerText = points;
    localStorage.setItem('donuteid', true);
}
else {
    alert("Invalid code.");
    return;
}

var points1 = pointsElement.innerText;
localStorage.setItem('points1', points1);

});



purchasebutton2.addEventListener('click', function() {
  if (parseInt(pointsElement.innerText) >= 600) 
                  {
                    points -= 600;
                    pointsElement.innerText = points;
                    name.style.color = '#FFBF00';
                    var points1 = pointsElement.innerText;
                    localStorage.setItem('points1', points1);
                    localStorage.setItem('homeryellow', '#FFBF00' )
            }
          else {alert('not enough sprinkles')}
          })


    var buttonName = document.getElementById('namechange');
buttonName.onclick =()=> {
  const newName = searchbar.value;
    localStorage.setItem('name1', newName);
    name.innerText = newName;
}

function Savename() {
    const name2 = localStorage.getItem('name1');
    name.innerText = name2;
    var homeryellow = localStorage.getItem('homeryellow');
      if (homeryellow) {
        name.style.color = homeryellow;
      }
}

  Savename()

         })
      


        function hidechange() {
  document.getElementById('preview').close()
}
function hideshop() {
  document.getElementById('shop').close()
}
function hidexp() {
  document.getElementById('experiences').close()
}
function hidenotes() {
  document.getElementById('notes').style.display= "none";
}
function shownotes() {
  document.getElementById('notes').style.display = "block";
}


dragElement(document.getElementById("notes"));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    // if present, the header is where you move the DIV from:
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    // otherwise, move the DIV from anywhere inside the DIV:
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
    </script>
</html>